<project default="jar">
	<!-- ================================================================== -->
	<target name="jar" description="Create the jar file">
		<property name="build.dir" value="C:/Temp/AdapterFramework/build"/>
		<delete dir="${build.dir}"/>
		<mkdir dir="${build.dir}"/>
		<property file="bin/AppConstants.properties" prefix="ac"/>
		<condition property="iaf.version" value="${ac.application.version}">
			<equals arg1="${ac.application.version.alpha}" arg2=""/>
		</condition>
		<condition property="iaf.version" value="${ac.application.version}-alpha${ac.application.version.alpha}">
			<not>
				<equals arg1="${ac.application.version.alpha}" arg2=""/>
			</not>
		</condition>
		<propertyfile file="${build.dir}/IAF.properties">
			<entry key="timestamp" type="date" pattern="yyyyMMdd-HHmm" value="now"/>
		</propertyfile>
		<property file="${build.dir}/IAF.properties" prefix="iaf"/>
		<jar destfile="${build.dir}/AdapterFramework ${iaf.version}.jar" duplicate="preserve">
			<fileset dir="Java Source"/>
			<fileset dir="bin"/>
			<manifest>
				<attribute name="Built-By" value="${user.name}"/>
				<section name="nl/nn/adapterframework/">
					<attribute name="Specification-Title" value="${ac.application.name}"/>
					<attribute name="Specification-Version" value="${ac.application.version}"/>
					<attribute name="Specification-Vendor" value="NN"/>
					<attribute name="Implementation-Title" value="nl.nn.adapterframework"/>
					<attribute name="Implementation-Version" value="${iaf.version} ${iaf.timestamp}"/> 
					<attribute name="Implementation-Vendor" value="NN"/>
				</section>
			</manifest>		
		</jar>
	</target>
</project>
